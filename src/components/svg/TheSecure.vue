<script setup>
import { onMounted, onUnmounted } from 'vue'
import { gsap } from 'gsap'

let ctx, scanTl, card

function createScanTimeline() {
  return gsap
    .timeline({
      paused: true,
      repeat: -1,
    })
    .fromTo(
      '#scan-circle',
      { opacity: 0, y: -50 },
      { opacity: 1, duration: 0.5, ease: 'power1.inOut' },
    )
    .to('#scan-circle', {
      y: 170,
      duration: 1.5,
      ease: 'sine.inOut',
    })
    .to('#scan-circle', {
      y: -60,
      opacity: 0,
      duration: 1.5,
      ease: 'sine.inOut',
    })
}

onMounted(() => {
  ctx = gsap.context(() => {
    scanTl = createScanTimeline()
    card = document.querySelector('.the-secure')
    if (!card) return

    const onEnter = () => {
      scanTl.play(0)
    }
    const onLeave = () => {
      scanTl.pause(0)
    }

    card.addEventListener('mouseenter', onEnter)
    card.addEventListener('mouseleave', onLeave)

    card._onEnter = onEnter
    card._onLeave = onLeave
  })
})

onUnmounted(() => {
  if (card) {
    card.removeEventListener('mouseenter', card._onEnter)
    card.removeEventListener('mouseleave', card._onLeave)
  }
  ctx?.revert()
})
</script>
<template>
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 501 501">
    <g id="floor-and-circle-and-shield">
      <path
        id="scan-circle"
        class="scan-circle"
        fill="color(display-p3 .6863 .8471 .2941)"
        fill-opacity="1"
        d="M251 239.7c-40.4 0-80.8-8.9-111.6-26.7-30.2-17.4-46.9-40.7-47-65.4 0-24.7 16.4-47.7 46.2-65C200 47 300 47 361.6 82.6c30.2 17.4 46.8 40.6 46.8 65.4 0 24.6-16.3 47.7-46 65-30.7 17.8-71 26.7-111.4 26.7Zm-1-181.6c-40 0-80 8.8-110.2 26.4-29 16.9-45 39.3-45 63 0 24 16.2 46.5 45.7 63.5 61 35.3 160 35.3 220.7 0 29-16.8 45-39.2 45-63 0-24-16.3-46.5-45.8-63.5C330 67 290 58.1 250 58.1Z"
      />
      <g id="floor">
        <path
          fill="color(display-p3 .6863 .8471 .2941)"
          d="m412.7 336-.1 59.4c-.1 23.8-15.8 47.7-47.2 66-63.1 36.6-165.9 36.6-229.4 0-32-18.5-48-42.8-48-67l.2-59.3c0 24.2 15.9 48.4 47.9 66.9 63.5 36.7 166.3 36.7 229.5 0 31.3-18.2 47-42 47-66Z"
        />
        <path
          fill="#000"
          d="M135.4 462.3c-31.3-18-48.6-42.2-48.5-68l.1-59.2c0-.7.6-1.2 1.2-1.2s1.1.5 1.1 1.2c0 24.9 16.8 48.3 47.3 66 63.2 36.4 165.6 36.4 228.4 0 30-17.5 46.5-40.6 46.6-65 0-.7.5-1.2 1-1.2.7 0 1.2.5 1.2 1.1l-.1 59.4c0 25.3-17 49-47.7 66.9-63.3 36.8-166.7 36.9-230.6 0ZM89.3 351.1l-.1 43.3c0 24.9 16.7 48.3 47.3 66 63.2 36.4 165.6 36.4 228.4 0 30-17.5 46.5-40.5 46.5-65l.1-43.5c-5.6 19.3-21.2 37-45.4 51-63.3 36.9-166.8 37-230.6 0-24.7-14.2-40.6-32.2-46.2-51.8Z"
        />
        <path
          fill="#fff"
          d="M364.8 269c63.6 36.8 64 96.3.8 133s-166 36.7-229.5 0c-63.6-36.7-64-96.2-.8-133 63.2-36.6 166-36.6 229.5 0Z"
        />
        <path
          fill="#000"
          d="M135.5 403c-31.2-18-48.4-42-48.4-67.7 0-25.4 16.9-49.3 47.7-67.2 63.3-36.8 166.8-36.8 230.6 0 31.2 18 48.4 42 48.4 67.7 0 25.4-16.9 49.3-47.7 67.2-63.4 36.8-166.8 36.8-230.6 0ZM250 242.7c-41.4 0-82.6 9.1-114 27.4-30 17.4-46.6 40.6-46.6 65.2 0 24.8 16.9 48.1 47.4 65.7 63.1 36.5 165.6 36.5 228.3 0 30-17.4 46.6-40.6 46.6-65.2 0-24.8-16.9-48.1-47.4-65.7-31.6-18.3-73-27.4-114.3-27.4Z"
        />
        <path
          fill="color(display-p3 .6863 .8471 .2941)"
          d="M183.5 374.4c36.3 21.1 96.2 21.8 133.8 0 37-21.7 37.6-56.7.7-77.8-36.3-21-97.6-21.7-134.5 0-37.6 21.8-37 56.7 0 77.8Z"
        />
        <path
          fill="color(display-p3 .2824 .6 .2039)"
          d="M215.2 356a77.6 77.6 0 0 0 70.5 0c19.4-11.4 19.8-29.8.3-41a78.3 78.3 0 0 0-70.8 0c-19.8 11.5-19.5 30 0 41Z"
        />
        <path
          fill="#000"
          d="M183 375.4c-37.8-21.5-38.4-57.5 0-79.7a1.1 1.1 0 1 1 1 2c-36.7 21.2-36.2 55 0 75.8 36.5 21.2 96 21.2 132.7 0 36.4-21.5 36.7-55.3.7-75.9a1.1 1.1 0 0 1 1.1-2c37.6 21.5 37.2 57.5-.6 79.8-37.2 21.5-97.7 21.7-135 0Z"
        />
        <path
          fill="#000"
          d="M155.9 391.2c-25.8-14.9-40-34.7-40-55.8 0-21 14-40.7 39.4-55.5 52-30.3 137.2-30.3 189.7 0 25.7 15 40 34.7 40 55.9 0 21-14 40.6-39.4 55.4-52.1 30.3-137.3 30.3-189.7 0Zm.5-109.3c-24.7 14.3-38.2 33.3-38.2 53.5 0 20.2 13.8 39.4 38.8 53.8 51.9 30 136 30 187.5 0 24.7-14.3 38.2-33.3 38.2-53.4 0-20.3-13.8-39.5-38.8-53.9-51.9-30-136-30-187.5 0Z"
        />
        <path
          fill="color(display-p3 .8471 .5429 .2941)"
          d="M135.9 462.4c-.7 0-1.2-.5-1.2-1.1v-59.1c0-.4.3-.8.6-1l20.5-11.9a1.1 1.1 0 1 1 1.1 2L137 402.8v58.5c0 .6-.5 1.1-1.1 1.1Zm229.1 0c-.7 0-1.2-.5-1.2-1.1v-58.5l-20-11.5a1.1 1.1 0 0 1 1.2-2l20.5 12c.3.1.5.5.5.9v59.1c0 .6-.5 1.1-1 1.1ZM156 281.9c-.3 0-.5 0-.7-.2L135 270a1.1 1.1 0 0 1 1.1-2l20.5 11.9a1.1 1.1 0 0 1-.6 2Zm189.3.1a1.1 1.1 0 0 1-.5-2.2l19.8-11.5c.5-.3 1.2-.1 1.5.4.3.6.2 1.3-.4 1.6L346 281.8l-.6.1Z"
        />
        <path
          fill="#000"
          d="M400.5 372.8a1.1 1.1 0 0 1-1-1.8 58 58 0 0 0 10.8-46.8c-4.5-20.6-20.4-39.3-46-54.1-63.2-36.5-165.6-36.5-228.4 0-25.3 14.7-41 33.3-45.3 53.8-3.4 16 .4 32.2 11.2 47a1.1 1.1 0 1 1-1.9 1.4 60.5 60.5 0 0 1-11.6-48.9c4.5-21.1 20.6-40.3 46.5-55.3 63.3-36.8 166.8-36.8 230.6 0 26.2 15.1 42.5 34.4 47.1 55.7a60.2 60.2 0 0 1-11 48.5c-.3.3-.6.5-1 .5Zm-265.1 89.5C104.1 444.2 87 420 87 394.3c0-.5.5-1 1.2-1 .6 0 1.1.5 1.1 1 0 25 16.7 48.4 47.3 66 63.2 36.5 165.6 36.5 228.4 0 30-17.4 46.5-40.5 46.5-65 0-.6.6-1 1.2-1s1.1.4 1.1 1c0 25.4-17 49.2-47.7 67-63.3 36.8-166.7 36.9-230.6 0Z"
        />
        <path
          fill="#000"
          d="M117 336.2c-.5 0-1-.5-1-1.1V12.2a1.1 1.1 0 1 1 2.2 0v322.9c0 .6-.5 1-1.1 1ZM133 42c-.7 0-1.2-.5-1.2-1.1v-9.6a1.1 1.1 0 1 1 2.3 0V41c0 .6-.5 1.1-1.1 1.1Zm0 72.7c-.7 0-1.2-.5-1.2-1.1V60.4a1.1 1.1 0 1 1 2.3 0v53.2c0 .6-.5 1-1.1 1Zm250.8 221.5c-.6 0-1.1-.5-1.1-1.1V12.2a1.1 1.1 0 1 1 2.3 0v322.9c0 .6-.5 1-1.2 1Z"
        />
        <path
          fill="#000"
          d="M155.9 391.1c-25.7-14.8-40-34.6-40-55.8 0-21 14-40.6 39.4-55.4.5-.3 1.2-.1 1.5.4.3.6.2 1.3-.4 1.6-24.6 14.3-38.2 33.3-38.2 53.4 0 20.3 13.8 39.4 38.8 53.9 51.9 30 136 30 187.5 0 24.7-14.3 38.2-33.3 38.2-53.5 0-20.3-13.8-39.4-38.8-53.8a1.1 1.1 0 1 1 1.1-2c25.8 14.9 40 34.7 40 55.8 0 21-14 40.7-39.3 55.4-52.2 30.4-137.3 30.3-189.8 0Z"
        />
        <path
          fill="color(display-p3 .2824 .6 .2039)"
          d="M250.4 472.8a14 14 0 1 0 0-28.2 14 14 0 0 0 0 28.2Z"
        />
      </g>
      <g id="shield">
        <g id="shield-sides">
          <path
            fill="color(display-p3 1 .9216 .3451)"
            d="M331.6 104.8 305 89.3c5.7 3.4 13.7 2.9 22.4-2.2l26.6 15.5c-8.8 5-16.7 5.5-22.4 2.2Z"
          />
          <path
            fill="#000"
            d="M339.8 108c-3.2 0-6.2-.7-8.8-2.2l-26.6-15.5a1.1 1.1 0 0 1 1.2-2c5.6 3.3 13.1 2.5 21.3-2.1.3-.2.7-.2 1.1 0l26.6 15.4a1.1 1.1 0 0 1 0 2 30 30 0 0 1-14.8 4.5Zm-7.7-4.2c5.2 3 12.1 2.6 19.6-1.3l-24.3-14a29.6 29.6 0 0 1-14.5 4.1l19.2 11.2Z"
          />
          <path
            fill="#fff"
            d="m231.4 332-26.6-15.4c-45.3-26.4-56-86.1-58-125.2l26.6 15.5c1.9 39 12.6 98.7 58 125.1Z"
          />
          <path
            fill="#000"
            d="m231.4 333.1-.6-.1-26.5-15.5c-44.6-25.9-56.5-82.8-58.6-126a1.1 1.1 0 0 1 1.7-1l26.5 15.4c.4.2.6.5.6 1 2 42.6 13.7 98.7 57.5 124.1a1.1 1.1 0 0 1-.6 2.1ZM148 193.5c2.4 42.3 14.4 97 57.4 122l9 5.3c-31-28.8-40.2-76-42.1-113.3l-24.3-14Z"
          />
          <path
            fill="color(display-p3 1 .9216 .3451)"
            d="m173.4 206.9-26.6-15.5a69.3 69.3 0 0 0 31.6-54.5l26.6 15.4c0 20-14 44.4-31.6 54.6Z"
          />
          <path
            fill="#000"
            d="M173.4 208c-.2 0-.4 0-.6-.2l-26.6-15.4a1.1 1.1 0 0 1 0-2 68 68 0 0 0 31-53.5 1.1 1.1 0 0 1 1.8-1l26.6 15.5c.3.2.5.5.5 1a70.8 70.8 0 0 1-32.7 55.6ZM149 191.4l24.4 14.2a68.7 68.7 0 0 0 30.4-52.6l-24.3-14.2a71.8 71.8 0 0 1-30.5 52.6Z"
          />
          <path
            fill="color(display-p3 1 .9216 .3451)"
            d="M205 152.3 178.4 137l117.4-68 26.6 15.5L205 152.3Z"
          />
          <path
            fill="#000"
            d="M205 153.5c-.2 0-.4 0-.6-.2L178 138a1.1 1.1 0 0 1 0-2l34.2-19.7c.5-.4 1.2-.2 1.5.4.3.5.1 1.2-.4 1.5L180.7 137l24.3 14 115-66.4-24.3-14.2-37 21.3c-.5.4-1.1.2-1.5-.4-.3-.5 0-1.2.5-1.5L295.2 68c.4-.2.8-.2 1.2 0l26.5 15.5a1.1 1.1 0 0 1 0 2l-117.4 67.7-.5.2Z"
          />
        </g>
        <g id="shield-face" fill-opacity="1">
          <path
            id="shield-face-inner"
            fill="#fff"
            d="M322.4 84.6c0 20 14.2 28 31.6 18-1.8 49.5-16.6 144-89.7 241-73.4-12.3-88.6-89.6-91-136.7a69.3 69.3 0 0 0 31.7-54.6l117.4-67.7Z"
          />
          <path
            id="shield-face-outline"
            fill="#000"
            d="M264.3 344.7h-.2c-74.7-12.5-89.6-91.7-91.9-137.8 0-.4.2-.8.6-1 17.2-10 31.1-34 31-53.6 0-.4.3-.8.6-1l117.4-67.7a1.1 1.1 0 0 1 1.7 1c0 9.2 3.1 16 8.7 19.2 5.6 3.2 13.1 2.4 21.2-2.2a1.1 1.1 0 0 1 1.7 1c-1.8 48.1-15.8 143.5-89.9 241.7-.2.2-.5.4-.9.4Zm-89.8-137.2c2.4 45.3 17.1 122.3 89.3 134.8 72.3-96 86.9-189.4 89-237.8-8.2 4.2-15.8 4.7-21.7 1.3-6-3.4-9.4-10.2-9.8-19.3L206.1 153a71.2 71.2 0 0 1-31.6 54.5Z"
          />
          <path
            id="shield-face-fill"
            fill="color(display-p3 .8471 .5429 .2941)"
            d="M259.4 330.7c-56.9-14-71-76.7-74-117.9a84 84 0 0 0 30.8-53.5l98.3-56.8a27.6 27.6 0 0 0 26.9 16 422.7 422.7 0 0 1-82 212.2Z"
          />
          <path
            id="face-inner-outline"
            fill="#000"
            d="M259.4 331.8h-.3c-58.7-14.4-72-80.7-74.9-119 0-.3.2-.7.5-1a83 83 0 0 0 30.4-52.7c0-.3.2-.6.5-.8l79.5-46c.6-.2 1.3 0 1.6.5.3.5.1 1.2-.4 1.5l-79 45.7a85.6 85.6 0 0 1-30.8 53.3c2.9 37.6 16 101.7 72.4 116.1a428.1 428.1 0 0 0 76-173c.2-.5.8-1 1.4-.8.6.1 1 .7.9 1.3a430.5 430.5 0 0 1-77 174.5c-.1.3-.5.4-.8.4Z"
          />
          <g id="shield-circle">
            <path
              id="Vector"
              fill="#fff"
              d="M263.3 167.6C286.8 154 306 164.9 306 192a94 94 0 0 1-42.5 73.7c-23.5 13.6-42.7 2.6-42.8-24.4 0-27.2 19-60.1 42.6-73.7Z"
            />
            <path
              id="Vector_2"
              fill="#000"
              d="M219.6 241.3c0-27.4 19.3-61 43-74.7 24.2-14 44.5-2.8 44.6 25.4a95 95 0 0 1-43.1 74.6c-24.4 14.1-44.4 2.6-44.5-25.3Zm44.2-72.7a92.6 92.6 0 0 0-42 72.7c.1 26.2 18.4 36.5 41.2 23.4 23.2-13.4 42-46 41.9-72.7 0-26.2-18.2-36.6-41-23.4Z"
            />
            <g id="shield-lock">
              <path
                id="outline"
                fill="#000"
                d="M256.9 239.8V226c-4.5-.2-8.3-3.6-8.3-10.8 0-9 6.3-20 14.1-24.6 8.4-4.8 15.5-.8 15.5 8.8 0 6.4-3.2 14.1-8.2 19.7v14.6a13 13 0 0 1-6 10.3c-3.8 2.2-7.1.2-7.1-4Zm1-16.1c.7 0 1.2.5 1.2 1v15.1c0 2.6 1.6 3.4 3.8 2.1 2.7-1.5 4.8-5.3 4.8-8.3v-15c0-.4 0-.6.3-.8a29 29 0 0 0 8-18.5c-.1-7.8-5.3-10.8-12.1-6.8a28.9 28.9 0 0 0-13 22.6c0 5 2.2 9 7 8.6Z"
              />
              <path
                id="inside"
                fill="color(display-p3 1 .9216 .3451)"
                d="M263.3 191.5c7.6-4.4 13.7-.9 13.8 7.8a30 30 0 0 1-8.3 19.2v15c0 3.5-2.3 7.7-5.3 9.4-3 1.7-5.5.4-5.5-3v-15.1c-4.9.4-8.3-3.2-8.3-9.7a30 30 0 0 1 13.6-23.6Z"
              />
            </g>
          </g>
        </g>
      </g>
      <path
        id="scan-circle"
        class="scan-circle"
        fill="color(display-p3 .6863 .8471 .2941)"
        fill-opacity="1"
        d="M251 239.7c-40.4 0-80.8-8.9-111.6-26.7-29.9-17.2-46.5-40.2-46.9-64.7 0-.6.5-1.1 1.1-1.1.7 0 1.2.5 1.2 1 .3 23.8 16.6 46 45.7 62.9 61 35.2 160 35.2 220.7 0 28.9-16.8 44.9-39.1 45-62.8 0-.6.5-1 1.1-1.1.6 0 1.1.5 1.1 1.1 0 24.5-16.4 47.5-46 64.7-30.7 17.8-71 26.7-111.4 26.7Z"
      />
    </g>
  </svg>
</template>
