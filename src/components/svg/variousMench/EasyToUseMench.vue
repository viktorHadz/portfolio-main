<script setup>
import { onMounted, onUnmounted } from 'vue'
import {
  withGsapContext,
  makeAssembleTimeline,
} from '@/composables/useGsapFuncs'

let ctx, tl
onMounted(() => {
  const svg = document.querySelector('#easyUseMench')
  ctx = withGsapContext(() => {
    tl = makeAssembleTimeline('#puzzle-rotate', '#bulb')

    svg.addEventListener('mouseenter', () => tl.play())
    svg.addEventListener('mouseleave', () => tl.reverse())
  })
})

onUnmounted(() => {
  ctx?.revert()
  tl?.kill()
})
</script>
<template>
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 508 463">
    <path
      fill="color(display-p3 .851 .851 .851)"
      d="M209 176c0-5 0-5-7-2-6 2-6 1-2 9l3 8c2 5 6-6 6-15Zm-7-13c-4-1-4-1-4 4 0 4 0 4 4 2s4-4 0-6Zm-162-8h35l1 Z"
    />
    <path
      id="bulb-base"
      d="M40.4219 157.531H76.0938L75.3217 177.299L68.6811 185.484L58.1797 190.426L47.0605 185.484L40.4219 177.299V157.531Z"
      fill="#D9D9D9"
      style="
        fill: #d9d9d9;
        fill: color(display-p3 0.851 0.851 0.851);
        fill-opacity: 1;
      "
    />
    <path
      fill="color(display-p3 .0627 .0549 .0588)"
      d="M42 339h13v46H42zm124 8c-5-4-5-4-6-3-2 2 2 6 14 16 6 5 7 5 7 0l-5-4-10-9Z"
    />
    <path
      fill="color(display-p3 .9137 .7333 .6039)"
      d="M249 353c-5-6-3-6-10 1s-6 6-4 9c5 5 4 8-4 14-7 5-8 6-5 7 4 3 0 4-7 1a638 638 0 0 0-28-10c-10-4-9-5-7 8l4 17c2 12 2 11 16 16 61 20 86-14 45-63Z"
    />
    <path
      fill="color(display-p3 .9137 .7333 .6039)"
      d="M231 365c-3-2-8-1-17 5-7 4-8 6-5 8 5 3 9 3 13 0l6-4c5-3 6-6 3-9Zm-4-12c-5-4-13-1-29 12-7 6-7 7-2 10 4 2 5 2 7-1s9-8 15-11c3-2 5-3 9-3 4-1 4-4 0-7Zm-10-9c-7-4-26 7-32 20-3 5 3 8 6 4 3-5 14-13 24-19 4-2 4-3 2-5Z"
    />
    <path
      fill="color(display-p3 .3098 .2471 .2196)"
      d="M177 186c0-1-2-2-4 0-1 1 0 3 2 4s3-1 2-4Z"
    />
    <path
      fill="color(display-p3 .9137 .7333 .6039)"
      d="m195 183-2-5-12 4v5c1 9 2 9-3 8l-2 2c0 4 0 5-2 5s-2-1-3-6c-1-11-4-14-12-9-16 10-2 50 15 42 4-3 6 1 2 3-5 3-11 3-17-1-3-3-3-2-7 6-7 16-15 23-25 20h-5c-5 4-11 4-20-1-4-2-5-2-6 2l-2 11 14 1a646 646 0 0 1 51 4l3-13c0-3 4-1 4 3 0 2 0 2 6 1 29-6 38-39 23-82Zm-8-37c-4-6-6-8-8-6-5 4-6 5-4 7 4 6 6 14 6 24 0 7 0 7 6 5 5-2 5-2 5-7 0-9-1-17-5-23Z"
    />
    <path
      fill="#000"
      d="M161 196c2-2 4 2 4 12l1 6c1 5-1 6-3 2-1-3-3-19-2-20Z"
    />
    <path
      fill="#000"
      fill-rule="evenodd"
      d="M53 57c28-3 53 20 50 45 0 3 0 4 3 2 11-5 20-8 27-8 6 0 9-1 11-3 9-7 23-8 30-3 2 2 2 2 6 1 18-5 26 13 13 34l-3 6c-3 5-3 5-2 7l5 10c4 9 3 8 7 10 13 4 17 7 15 11l-1 9c0 10-1 14-7 21v8c3 23-2 39-14 52-6 6-11 8-22 10l-6 1c-2 3 0 8 4 9 15 5 29 12 39 21a230 230 0 0 1 40 43c6 7 8 9 17 23 18 29 9 57-19 61a117 117 0 0 1-21 0c-9-1-21-5-29-9l-5-2 1 13 2 17c0 7 0 7-8 9-18 4-28 6-47 7a458 458 0 0 1-56-2c-9 0-30-4-36-6-3-1-3-1-3-33v-31l-4-2c-17-12-23-50-11-76 9-18 23-29 47-37 12-4 12-5 14-9 2-7 1-8-5-12-4-2-16-13-21-19-8-11-14-25-14-38-1-6-1-6-6-11-8-9-9-16-8-30 1-8-3-15-14-28-6-6-8-12-10-21-1-6-1-8 1-15 5-20 20-33 40-35Zm196 296c-5-6-3-6-10 1s-6 6-4 9c5 5 4 8-4 14-7 5-8 6-5 7 4 3 0 4-7 1a628 628 0 0 0-28-10c-10-4-9-5-7 8l4 17c2 12 2 11 16 16 61 20 86-14 45-63Zm-202-8c-1-2-2-2-3 0-1 4 0 40 2 40l1-40Zm184 20c-3-2-8-1-17 5-7 4-8 6-5 8 5 3 9 3 13 0l6-4c5-3 6-6 3-9Zm-4-12c-5-4-13-1-29 12-7 6-7 7-2 10 4 2 5 2 7-1s9-8 15-11c3-2 5-3 9-3 4-1 4-4 0-7Zm-10-9c-7-4-26 7-32 20-3 5 3 8 6 4 3-5 14-13 24-18 4-3 4-4 2-6Zm-50 4c-5-5-5-5-6-4-2 2 1 6 13 16 5 4 6 4 6 0l-4-4-9-8Zm26-170-12 4v5c1 9 2 9-3 8l-2 2c0 4 0 5-2 5s-2-1-3-6c-1-11-4-14-12-9-16 10-2 50 15 42 4-3 6 1 2 3-5 3-11 3-17-1-3-3-3-2-7 6-7 16-15 23-25 20h-5c-5 4-11 4-20-1-4-2-5-2-6 2l-2 11 14 1a644 644 0 0 1 51 4l3-13c0-3 4-1 4 3 0 2 0 2 6 1 29-6 38-39 23-82l-2-5Zm-27-85c-6-4-13-2-20 5-3 3-3 3-7 2-15-1-34 8-39 19l-10 14c-9 12-10 15-11 27 0 12-1 15-3 19-4 8-9 11-17 12-6 1-6 6-1 20 5 17 30 47 35 41 3-3 7-3 12 1s7 4 13 1 8-4 11-3c8 3 13-2 19-17l2-5c2-4 2-6 1-10-8-25 0-39 18-38 6 1 8-1 8-11 0-13-5-21-11-22-5-1-4-2 2-5 9-5 18-14 23-25 9-17-4-32-16-18-2 3-3 3-4-1 0-2-2-5-5-6Zm43 83c0-5 0-5-7-2-6 2-6 1-2 9l3 8c2 5 6-6 6-15Zm-32 10c-1-1-2-2-3 0-1 0 0 2 2 3 1 1 2-1 1-3Zm-109-6H47c0 6 12 9 17 5l4-5Zm119-34c-4-6-6-7-8-5-4 3-5 5-4 7 4 5 6 13 6 22 0 8 0 7 6 5 4-1 4-2 5-7 0-8-2-16-5-22ZM73 170c0-2 0-2-6-1H52c-10 0-11 0-11 2 0 3 4 4 21 4 12 1 12 1 11-5Zm129-7c-4-1-4-1-4 4 0 4 0 4 4 2s4-4 0-6Zm-127-3c0-3 0-3-7-2H48c-6 0-6 0-7 4 0 2 0 2 18 2 16 0 15 1 16-4Zm-6-98c-23-6-47 9-51 30-2 14 2 26 14 41 6 7 8 11 8 17 1 3 8 6 10 4 1-1-2-16-5-25-7-19-3-27 9-17 4 4 5 4 9 0s8-5 11-3c2 2 1 8-3 20l-4 14c-2 7-2 11 1 10 6 0 7 0 8-5 2-8 4-11 9-16 5-6 11-16 12-23 5-20-7-41-28-47Zm1 52c0-2-2-1-5 2-6 5-7 5-14 0-5-6-7-2-3 10l6 22c0 5 1 6 4 6 2 0 3 0 4-5 0-5 1-8 5-19 3-7 4-15 3-16Z"
      clip-rule="evenodd"
    />
    <path
      fill="color(display-p3 .3098 .2471 .2196)"
      d="M146 98c7-7 14-9 20-5 3 1 5 4 5 6 1 4 2 4 4 1 12-14 25 1 16 18-5 11-14 21-23 25-6 3-7 4-2 5 8 0 10 8 11 22 0 10-2 12-8 11-18-1-26 14-18 38 1 4 1 7-1 10l-2 5c-6 15-11 20-19 17-3-1-5 0-11 3s-8 3-13-1-9-4-12-1c-5 6-30-24-35-41-5-14-5-19 1-20 8 0 13-4 17-12 2-4 3-7 3-19 1-12 2-14 11-27l10-14c5-11 24-20 39-19 4 1 4 1 7-2Z"
    />
    <g id="bulb" class="fill-[#FFEFC7]">
      <path
        d="M69 62c-23-6-47 9-51 30-2 14 2 26 14 41 6 7 8 11 8 17 1 3 8 6 10 4 1-1-2-16-5-25-7-19-3-27 9-17 4 4 5 4 9 0s8-5 11-3c2 2 1 8-2 20l-5 14c-2 7-2 11 1 10 6 0 7 0 8-5 2-8 4-11 9-16 5-6 11-16 12-23 5-20-7-41-28-47Z"
      />
      <path
        d="M70 114c0-2-2-1-5 2-6 5-7 5-13 0-6-6-8-2-4 10l6 22c0 5 1 6 4 6 2 0 3 0 4-5 0-5 1-8 5-19 3-7 4-15 3-16Z"
      />
      <rect
        width="7.8"
        height="28.1"
        y="41"
        rx="3.9"
        transform="rotate(-45 0 41)"
      />
      <rect width="7.8" height="28.1" x="55" y="18" rx="3.9" />
      <rect
        width="7.8"
        height="28.1"
        x="111"
        y="36"
        rx="3.9"
        transform="rotate(45 110 36)"
      />
    </g>

    <g class="static-puzzle">
      <path
        id="puzz-left"
        fill="color(display-p3 .6863 .8471 .2941)"
        stroke="#000"
        stroke-opacity="1"
        stroke-width="1.6"
        d="M328 108c4-2 11-1 16 3l5 6v6l-1 2-1 2 1 1h4l3-1 5-2 4-2c2-1 6-2 13-2h7v1l1 2v4a238 238 0 0 0 4 17l1 4a142 142 0 0 1 2 6l-1 2-2 1c-10-3-17-1-21 4-3 5-4 12-2 19 2 6 7 9 12 11 6 1 12 0 15-3l3-3a3 3 0 0 1 1 0 16 16 0 0 0 0 1l1 2a26 26 0 0 1 0 1l9 27-1 1h-2l-5 1a708 708 0 0 0-49 14 4553 4553 0 0 0-31 9l-3-3c-2-2-3-7-4-14l-2-9-1-2-1-2-1-1-2 1-2 1-2 1c-8 6-16 6-22 2s-9-12-6-21c2-8 10-13 21-11l1 1h2l1-1 1-1-1-5-3-10-1-2-3-13v-9c1-2 3-3 6-4l15-4 11-3 3-1 1-2-1-1a3 3 0 0 0-1 0c-3-1-5-5-5-9s3-8 8-12Z"
      />
      <g id="puzzle-rotate">
        <path
          id="move-piece"
          fill="#ffefc7"
          stroke="#000"
          stroke-opacity="1"
          stroke-width="1.6"
          d="m451 5 4 1 3 5 2 9a967 967 0 0 0 5 22c0 3-1 4-2 5l-3 2-7-1-5-1c-2 0-3 1-5 3l-4 5-1 6 3 7 6 4c5 0 11-1 17-6l4-1 1 2 2 4a159 159 0 0 0 5 20l1 6-1 3-4 2a215 215 0 0 0-24 7v2l1 1c7 7 7 19 0 25s-14 7-20 4-10-9-10-18v-4l-1-2-1-1-5 1-7 2h-3a154 154 0 0 1-15 3c-1 0-2 0-2-2l-2-5-6-23-3-4h-2l-2 1c-8 6-15 8-20 7s-10-5-12-12c-6-16 10-30 25-23l3 1h1l1-1 1-4-2-5a114 114 0 0 1-4-19l1-4 4-3a70 70 0 0 1 16-5 29 29 0 0 0 3 0 15 15 0 0 0 2-1h8l3 1 2 2 1 5c0 6 2 10 4 13 2 2 6 3 10 2 4 0 7-3 8-6 1-4 0-8-3-12l-4-7v-4l5-3 11-3a410 410 0 0 0 17-3Z"
        />
      </g>
      <path
        id="puzz-right"
        fill="color(display-p3 .6863 .8471 .2941)"
        stroke="#000"
        stroke-opacity="1"
        stroke-width="1.6"
        d="M475 99h2l1 1 3 6 4 15a556 556 0 0 0 13 49l3 9 1 6v3l-1 2h-1l-8 2a709 709 0 0 0-49 14l-27 8a65 65 0 0 1-8 3l-6-18-5-12v-1a1 1 0 0 0-1 0 16 16 0 0 1-2 1c-8 6-16 6-22 2s-9-11-6-21c2-8 10-13 21-11l2 1h1l2-1v-1l-1-5-3-10-1-2-3-12 2-6 6-2 13-2 9-3a23 23 0 0 1 4-1h1l1 2v6c0 6 2 11 6 14 4 2 9 2 15 0 7-2 11-10 9-19-1-4-4-7-5-9l2-1 5-2 18-3 5-2Z"
      />
    </g>
  </svg>
</template>
